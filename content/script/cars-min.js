!function(n){var t=29,e=[0,15,16,17],o=[10,10,10,10,10],c=[10,10,10,10],a=[10,10,10],r=[10,10],s=[100],d=56,l=[0,8,27,37,38,43,41,39,40],h=[20.072,18.872,20.101,22.196,19.052],f=[10,10,10,10],p=[10,10,10],g=[10,10],u=[s,r,a,c,o],v=[s,g,p,f,h],y=["events","ekspositsioon"],w=[t,d],m=[e,l],b=[u,v],k=d-parseInt(l.length),T=t-parseInt(e.length),A=[T,k],j=(n(".cars-page-overlay"),n(".cars-page-overlay").find(".cars-body")),x=n("section.cars-content"),E=x.find("li#events"),G=x.find("li#expo"),I=x.find(".expo-list"),C=1,Q=0,S=0,q=function(t){var e=j.children();e.html("");var o=e.filter(function(){return"none"!==n(this).css("display")}).length;S=o;var c=y[t],a=w[t],r=m[t];b[t][o-1];for(i=0;i<o;i++)e.eq(i).css({width:100/o+"%"});for(i=0;i<a;i++)-1==jQuery.inArray(i,r)&&e.eq(i%o).append('<img src="/content/images/'+c+"/"+i+'.JPG"/>')},D=function(){var t=j.children(),e=t.filter(function(){return"none"!==n(this).css("display")}).length,o=[0,0,0,0,0],c=0,a=100/e,r=0;for(i=0;i<e;i++)c+=t.eq(i).height();for(r=c/e,i=0;i<e;i++)o[i]=r/t.eq(i).height()*a;for(i=0;i<e;i++)t.eq(i).css({width:o[i]+"%"})},_=function(n){Q=0,j.find("img").load(function(){Q++,Q>=n&&D()})};G.on("click",function(){j.children();0==C&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),q(1),C=1,I.show(),_(k))}),E.on("click",function(){j.children();1==C&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),q(0),C=0,I.hide(),_(T))});var B=function(){var i=j.children().filter(function(){return"none"!==n(this).css("display")}).length;S!=i&&(console.log(S),console.log(i),q(C),_(A[C]))};q(1),_(k);var z;n(window).on("resize",function(){clearTimeout(z),z=setTimeout(function(){B()},200)})}(jQuery);
