!function(e){var n=29,t=[0,15,16,17],r=76,s=[0,24,62,57,27,37,38,61,43,23,41,63,40,58,8,39,59,55,64],l=["events","ekspositsioon"],o=[n,r],a=[t,s],c=r-parseInt(s.length),f=n-parseInt(t.length),h=[f,c],d=(e(".cars-page-overlay"),e(".cars-page-overlay").find(".cars-body")),g=e(".cars-page-overlay").find("ul"),u=e("section.cars-content"),v=u.find(".expo-list"),m=1,p=0,y=0,C=function(n){var t=d.children();t.html("");var r=t.filter(function(){return"none"!==e(this).css("display")}).length;y=r;var s=l[n],c=o[n],f=a[n];for(i=0;i<r;i++)t.eq(i).css({width:100/r+"%"});for(i=1;i<c;i++)-1==jQuery.inArray(i,f)&&e("<img/>",{src:"/content/images/"+s+"/"+i+".JPG",click:function(){e(window).width()<=750||(q(),w(e(this).eq(0).attr("src")),e(this).eq(0).addClass("lightfilter"))}}).appendTo(t.eq((i-1)%r))},q=function(){d.find("img").removeClass("lightfilter"),d.find("img").removeClass("darkfilter"),v.removeClass("highlight-li")},w=function(e){var n=e.split("").reverse(),t="";for(i=0;i<n.length&&"/"!=n[i];i++)t+=n[i];t=t.split("").reverse().join("").slice(0,-4),g.find("#"+t).addClass("highlight-li")},k=function(){var n=d.children(),t=n.filter(function(){return"none"!==e(this).css("display")}).length,r=[0,0,0,0,0],s=0,l=100/t,o=0;for(i=0;i<t;i++)s+=n.eq(i).height();for(o=s/t,i=0;i<t;i++)r[i]=o/n.eq(i).height()*l;for(i=0;i<t;i++)n.eq(i).css({width:r[i]+"%"})},j=function(i){p=0,d.find("img").load(function(){p++,p>=i&&k()})};v.on("click",function(){var i=e(this).attr("id"),n=i+".JPG";d.find("img").addClass("darkfilter");var t=d.find("img[src$='/"+n+"']");t.removeClass("darkfilter"),t.addClass("lightfilter"),e(this).siblings().removeClass("highlight-li"),e(this).addClass("highlight-li")});var T=function(){var i=d.children().filter(function(){return"none"!==e(this).css("display")}).length;y!=i&&(C(m),j(h[m]))};e(document).ready(function(){C(1),j(c)});var b;e(window).on("resize",function(){clearTimeout(b),b=setTimeout(function(){T()},50)})}(jQuery);
