!function(n){var e=29,t=[0,15,16,17],o=[10,10,10,10,10],c=[10,10,10,10],s=[10,10,10],r=[10,10],a=[100],l=56,d=[0,8,27,37,38,43,41,39,40],u=[20.072,18.872,20.101,22.196,19.052],f=[10,10,10,10],h=[10,10,10],g=[10,10],p=[a,r,s,c,o],v=[a,g,h,f,u],y=["events","ekspositsioon"],m=[e,l],w=[t,d],b=[p,v],k=l-parseInt(d.length),A=e-parseInt(t.length),I=[A,k],E=(n(".cars-page-overlay"),n(".cars-page-overlay").find(".cars-body")),G=n("section.cars-content"),T=G.find("li#events"),q=G.find("li#expo"),C=G.find(".expo-list"),j=1,S=0,x=0,_=function(e){var t=E.children();t.html("");var o=t.filter(function(){return"none"!==n(this).css("display")}).length;x=o;var c=y[e],s=m[e],r=w[e];b[e][o-1];for(i=0;i<o;i++)t.eq(i).css({width:100/o+"%"});for(i=0;i<s;i++)-1==jQuery.inArray(i,r)&&t.eq(i%o).append('<img src="/content/images/'+c+"/"+i+'.JPG"/>')},z=function(){var e=E.children(),t=e.filter(function(){return"none"!==n(this).css("display")}).length,o=[0,0,0,0,0],c=0,s=100/t,r=0;for(i=0;i<t;i++)c+=e.eq(i).height();for(r=c/t,i=0;i<t;i++)o[i]=r/e.eq(i).height()*s;for(i=0;i<t;i++)e.eq(i).css({width:o[i]+"%"})},Q=function(i){S=0,E.find("img").load(function(){S++,S>=i&&z()})};q.on("click",function(){E.children();0==j&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),_(1),j=1,C.show(),Q(k))}),T.on("click",function(){E.children();1==j&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),_(0),j=0,C.hide(),Q(A))});var B=function(){var i=E.children().filter(function(){return"none"!==n(this).css("display")}).length;x!=i&&(console.log(x),console.log(i),_(j),Q(I[j]))};n(document).ready(function(){_(1),Q(k)});var O;n(window).on("resize",function(){clearTimeout(O),O=setTimeout(function(){B()},50)})}(jQuery);
