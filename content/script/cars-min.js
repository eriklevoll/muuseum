!function(n){var e=29,o=[0,15,16,17],t=[10,10,10,10,10],s=[10,10,10,10],c=[10,10,10],r=[10,10],a=[100],l=56,d=[0,8,27,37,38,43,41,39,40],h=[20.072,18.872,20.101,22.196,19.052],g=[10,10,10,10],f=[10,10,10],u=[10,10],p=[a,r,c,s,t],v=[a,u,f,g,h],b=["events","ekspositsioon"],y=[e,l],k=[o,d],m=[p,v],w=l-parseInt(d.length),q=e-parseInt(o.length),j=[q,w],x=(n(".cars-page-overlay"),n(".cars-page-overlay").find(".cars-body")),Q=n("section.cars-content"),A=Q.find("li#events"),G=Q.find("li#expo"),I=Q.find(".expo-list"),P=1,J=0,E=0,T=function(e){var o=x.children();o.html("");var t=o.filter(function(){return"none"!==n(this).css("display")}).length;E=t;var s=b[e],c=y[e],r=k[e];m[e][t-1];for(i=0;i<t;i++)o.eq(i).css({width:100/t+"%"});for(i=0;i<c;i++)-1==jQuery.inArray(i,r)&&o.eq(i%t).append('<img src="content/images/'+s+"/"+i+'.JPG"/>')},S=function(){var e=x.children(),o=e.filter(function(){return"none"!==n(this).css("display")}).length,t=[0,0,0,0,0],s=0,c=100/o,r=0;for(i=0;i<o;i++)s+=e.eq(i).height();for(r=s/o,i=0;i<o;i++)t[i]=r/e.eq(i).height()*c;for(i=0;i<o;i++)e.eq(i).css({width:t[i]+"%"})},C=function(i){J=0,x.find("img").load(function(){J++,J>=i&&S()})};G.on("click",function(){x.children();0==P&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),T(1),P=1,I.show(),C(w))}),A.on("click",function(){x.children();1==P&&(n(this).siblings().css({background:"none"}),n(this).css({background:"rgba(250,250,250,0.2)"}),T(0),P=0,I.hide(),C(q))});var B=function(){var i=x.children().filter(function(){return"none"!==n(this).css("display")}).length;E!=i&&(console.log(E),console.log(i),T(P),C(j[P]))};T(1),C(w);var _;n(window).on("resize",function(){clearTimeout(_),_=setTimeout(function(){B()},200)})}(jQuery);
