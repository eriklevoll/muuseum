!function(n){var t=0,e=148,o=[3,11],c=324,r=[25,144,323],s=199,a=[1,2,3,53,57,59,76,77,78,101,153,154],l=29,u=[3,8,15],d=38,f=[],h=["TSAARIAEG","SAKSAAEG","EESTIAEG","NKOGUDEAEG","PRAEGU"],g=[e,l,c,s,d],p=[o,u,r,a,f],v=e-parseInt(o.length),y=c-parseInt(r.length),m=l-parseInt(u.length),b=s-parseInt(a.length),A=d-parseInt(f.length),k=[v,m,y,b,A];n(".page-logo");pageLang=n(".page-language");var I=n(".pictures-page-overlay"),w=n(".picture-large-overlay"),E=I.find("ul"),G=I.find(".pictures-header hr"),_=I.find(".static-theme-container"),C=(I.find(".fixed-theme-container"),w.find(".large-picture-container")),q=I.find(".pictures-body"),S=(q.find(".thumb-div"),function(t){var e=q.children();e.html("");var o=e.filter(function(){return"none"!==n(this).css("display")}).length;prev_cols_count=o;var c,r=h[t],s=g[t],a=p[t];for(i=0;i<o;i++)e.eq(i).css({width:100/o+"%"});for(i=0;i<s;i++)-1==jQuery.inArray(i,a)&&(i<10?c="000":i<100?c="00":i<1e3&&(c="0"),e.eq(i%o).append('<img src="content/images/ajastud/'+r+"/IMG_"+c+i+'.jpg"/>'))}),T=function(){var t=q.children(),e=t.filter(function(){return"none"!==n(this).css("display")}).length,o=[0,0,0,0,0],c=0,r=100/e,s=0;for(i=0;i<e;i++)c+=t.eq(i).height();for(s=c/e,i=0;i<e;i++)o[i]=s/t.eq(i).height()*r;for(i=0;i<e;i++)t.eq(i).css({width:o[i]+"%"})},j=function(i){imgCounter=0,q.find("img").load(function(){imgCounter++,imgCounter>=i&&T()})},x=function(){w.fadeOut(200,function(){})};E.children().on("click",function(){q.children();n(this).hasClass(".active")||(n(this).siblings().css({background:"none"}),t=n(this).attr("data-title"),S(t),j(k[t]),n(this).css({background:"rgba(250,250,250,0.2)"}),n(this).siblings().removeClass(".active"),n(this).addClass(".active"))}),I.scroll(function(){var i=n(this).scrollTop();if(100>=i){var t=String(1-.01*i);_.css("opacity",t),G.css("opacity",t)}else _.css("opacity","0"),G.css("opacity","0")}),q.children().on("click","img",function(){var i=C.find(".large-picture-close"),t=n(this).attr("src");console.log(i),C.css({background:"url("+t+") no-repeat center center","background-size":"contain"}),console.log(n(this)[0]);var e=n(this).width(),o=n(this).position().left;console.log(o+e),i.css({"left:":o+e+"px !important"}),w.fadeIn(200,function(){})}),n(".picture-large-overlay").find("span").on("click",function(){x()}),n(document).keydown(function(i){27===i.which&&x()});var z=function(){var i=q.children().filter(function(){return"none"!==n(this).css("display")}).length;prev_cols_count!=i&&(console.log(prev_cols_count),console.log(i),S(t),j(k[t]))};S(t),j(k[t]);var K;n(window).on("resize",function(){clearTimeout(K),K=setTimeout(function(){z()},200)})}(jQuery);
